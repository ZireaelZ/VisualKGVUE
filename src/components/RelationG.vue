<template>
  
  <div>
    <div style="height:calc(100vh - 50px);">
      <RelationGraph
        ref="seeksRelationGraph"
        :options="graphOptions"
        :on-node-click="onNodeClick"
        :on-line-click="onLineClick" />
    </div>
    <el-button type="success" class="c-show-code-button"><el-link href="https://github.com/seeksdream/relation-graph/blob/master/examples/views/seeks-graph-docs/demo/Demo4Logo.vue" target="_blank" style="color: #ffffff;">查看代码</el-link></el-button>
  </div>
</template>

<script>
// 如果您没有在main.js文件中使用Vue.use(RelationGraph); 就需要使用下面这一行代码来引入relation-graph
import RelationGraph from 'relation-graph/vue3';
export default {
  name: 'RelationG',
  components: {RelationGraph},
  data() {
    return {
      isShowCodePanel: false,
      graphOptions: {
        // "backgrounImage": "https://camo.githubusercontent.com/ede1654f055903cdc39044129d15d5b158f4f3b33ba5b7c21c7407792a506dea/687474703a2f2f72656c6174696f6e2d67726170682e636f6d2f776562736974652f6c6f676f",
        "defaultNodeColor": "#409EFF",
        "defaultNodeBorderColor": "#409EFF",
        "defaultNodeBorderWidth": 1,
        "defaultNodeShape": 1,
        "moveToCenterWhenRefresh": false,
        "zoomToFitWhenRefresh": false,
        "layouts": [
          {
            "label": "中心",
            "layoutName": "force",
            "layoutClassName": "seeks-layout-center",
            "defaultExpandHolderPosition": "hide",
            "defaultJunctionPoint": "border"
          }
        ]
      }
    };
  },
  mounted() {
    this.showSeeksGraph();
  },
  methods: {
    showSeeksGraph() {
      const __graph_json_data = {
        rootId: 'a',
        nodes: [
          { id: 'a', text: 'A', borderColor: 'yellow' },
          { id: 'b', text: 'B', color: '#43a2f1', fontColor: 'yellow' },
          { id: 'c', text: 'C', nodeShape: 1, width: 80, height: 60 },
          { id: 'e', text: 'E', nodeShape: 0, width: 150, height: 150 }
        ],
        lines: [
          { from: 'a', to: 'b', text: '关系1', color: '#43a2f1' },
          { from: 'a', to: 'c', text: '关系2' },
          { from: 'a', to: 'e', text: '关系3' },
          { from: 'b', to: 'e', text: '', color: '#67C23A' }
        ]
      };
      this.$refs.seeksRelationGraph.setJsonData(__graph_json_data, (graphInstance) => {
        // 这些写上当图谱初始化完成后需要执行的代码
        console.log(graphInstance)
      });
    },
    onNodeClick(nodeObject, $event) {
      console.log($event)
      console.log('onNodeClick:', nodeObject);
    },
    onLineClick(lineObject, linkObject, $event) {
      console.log($event)
      console.log(linkObject)
      console.log('onLineClick:', lineObject);
    }
  }
};
</script>
